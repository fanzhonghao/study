# SA2.2  调用/返回 仓库  

## Call/Return的不同种类  

* 主程序和子程序  
* 面向对象/抽象数据类型  
* 分层架构  
* 其它，eg: C/S  

<b> 主程序和子程序</b>  
> 单线程控制，划分为若干处理步骤  

<b> 功能模块</b>  
> 把处理步骤集成到模块中  

<b> 抽象数据类型 </b>  
> 操作和数据捆绑在一起，隐藏具体实现。  

<b> 对象 </b>  
> 方法(动态绑定),多态，重用  

<b> 面向对象架构 </b>  
> 对象活动在不同的进程/线程  

<b> 组件</b>  
> 多个接口，二进制兼容，中间件  

### 主程序和子程序
<b>适用于</b>应用的功能运算存在层次结构的场景。  
<b>系统模型: </b>分成定义和调用，子程序通常被模块化定义。  
<b>组件: </b>程序和显示可见的数据。  
<b>连接件: </b>过程调用和显示数据共享。  
<b>控制结构: </b>单线程。  

#### 管道 VS 过程

类型 | 控制 | 语义 | 数据 | 变量 | 编程方式
----|---|---|---|----
<b>管道</b> | 异步、数据驱动 | 功能化的 | 流形式 | 缓存、文件读完动作 | 函数式编程
<b>过程</b> | 同步、分块 | 分层 | 参数、返回值 | 绑定、异常处理、多态 | 命令式编程

<b>模块</b>是一个编译单元，包括相似的声明和接口。  
<strong>将系统模块化原因和标准：</strong>  
<b>管理：</b>将整体开发负担分解  
<b>演化：</b>将系统解耦以便对于系统的某一部分修改时不影响其它部分。  
<b>理解：</b>让系统能够以更小的组成形式被理解。  

### 数据抽象或面向对象  

OO是对现实中离散事件和个体交互的仿真，最适合模拟现实。  
<b>适用于</b>模拟现实的场景。  
<b>系统模型：</b>状态的本地化维护。  
<b>组件：</b>管理者（eg:服务者，对象，抽象数据类型）。  
<b>连接件：</b>过程调用。  
<b>控制结构：</b>分散管理的，通常是单线程的。  

<b>对象方法的缺点：</b>  
1. 需要管理大量对象（大量对象需要额外的结构存储）  
2. 管理大量交互  
3. 对行为的分散责任（使系统很难去理解）  
4. 捕获关联设计的家族（类图无法表示运行时内存状态）  

### 分层架构模式  
<b>适用于</b>系统中提供不同服务的类能够被分层次地安排设计的应用。  
<b>系统模型：</b>不透明的层次。  
<b>组件：</b>通常是复合的，由不同的过程集合组成。  
<b>连接件：</b>依赖于组件结构，通常是受限的可见性下的过程调用，也可能是C/S。  
<b>控制结构：</b>单线程。  

<strong>层次风格特点</strong>  
1. 每层为上一层提供服务，使用下一层的服务，只能见到与自己邻接的层。  
2. 大的问题分解为若干个渐进的小问题，逐步解决，隐藏了很多复杂度。  
3. 修改一层，最多影响两层，通常只会影响上层。若层之间接口稳固，则不会造成其他影响。  
4. 上层必须知道下层的身份，不能调整层次之间的顺序。  
5. 层层相调，影响性能。  

### C/S  
Workstations包含显示层与业务层，Server只有数据。  
C/S有三个主要组成部分：数据库服务器、客户端和网络。  
服务器（后台）负责数据管理，客户端（前台）完成与用户的交互任务。  
<b>缺点：</b>  
1. 对客户端软硬件配置要求较高，客户端臃肿。  
2. 客户端程序设计复杂  
3. 数据安全性不好。客户端程序可以直接访问数据库服务器。  
4. 信息内容和形式单一  
5. 用户界面风格不一，使用繁杂，不利用推广使用  
6. 软件维护与升级困难。每个客户机上的软件都需要维护  

### 三层C/S -> Client-Application-Server  
增加一个应用服务器  
整个应用逻辑驻留在应用服务器上，只有表示层存在于客户机上。  
应用功能分为三层：表示层、功能层、数据层：  
> 表示层是应用的用户接口部分，通常使用GUI  
功能层是应用的主体，实现具体的业务处理逻辑  
数据层是数据库管理系统。  
以上三层逻辑上独立。  
通常只有表示层配置在客户端中。  

### B/S  
B/S是三层C/S的特例。  
* 客户端为http浏览器
> 为增强功能，往往还需要安装flash、jvm及一些专用插件  
使用标准http/https协议  
要考虑浏览器兼容的问题  

* 早期只能“拉”不能“推”，现在已有较多的推送  
* 客户之间的通信只能通过服务器中转  
* 安全性较难控制（SQL注入攻击等）  
* 数据查询等响应速度低于C/S体系结构  
* 服务器的负荷大，客户机的资源浪费

## 数据中心/数据共享  
![](images/dataCentric.PNG)  
这种风格描绘很多种系统，共同特点是：共享数据。系统会收集、操作、存储大量的数据，例如数据库。  
<b>共享信息系统优点：</b>很容易增加数据的生产者和消费者  
<b>问题是</b>同步，配置和管理，原子性，一致性，持久性，性能。  
除数据库外，剪贴板、注册表是典型的仓库风格的例子。  

### Computer Aided Software Engineering（CASE）
相对于DBMS，CASE的比较特点：
* 更多的数据类型  
* 更少的数据类型实例  
* 更慢的查询频率  
* 更大，更复杂，更集中的信息  
* 生命周期没有更短  

### 仓库  
主要任务是操纵数据、数据需要长期保存。  
<b>适用于</b>核心问题是建立、扩充和维护复杂的中央机构的信息的系统。  
<b>系统模型：</b>集中的数据，通常是结构化的。  
<b>组件：</b>一个内存，许多纯粹用来计算的程序。（共享内存）  
<b>连接件：</b>通过直接数据访问和过程调用的与内存交互的计算单元。  
<b>控制结构：</b>根据仓库的类型变化。

仓库的变化  
在控制策略上的区别：  
* 设计者预先定义好（编译器）  
* 输入流的信息类型决定 （数据库事务系统）  
* 系统其他部分的新信息决定 （刮板）  
* 机会主义：计算的状态决定 （黑板）  

[Next](https://github.com/fanzhonghao/study/blob/softwareArchitecture/2.3.md)  